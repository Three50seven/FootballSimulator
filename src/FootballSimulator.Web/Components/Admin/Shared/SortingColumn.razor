<th class="sortable @SortCss"
    @onclick="OnClick">
    <span class="sort-indicator">@SortSymbol</span>
    @Text
</th>

@code {
    [Parameter] public string Text { get; set; } = "";
    [Parameter] public string Column { get; set; } = "";
    [Parameter] public string SortBy { get; set; } = "";
    [Parameter] public string Direction { get; set; } = "asc";
    [Parameter] public EventCallback<(string SortBy, string Direction)> OnSort { get; set; }

    private bool IsCurrentSort => SortBy == Column;

    private string SortCss => IsCurrentSort ? (Direction == "asc" ? "ascending" : "descending") : "";

    private string SortSymbol => Direction == "asc" ? "▲" : "▼";

    private async Task OnClick()
    {
        string newDirection = Direction;

        if (IsCurrentSort)
            newDirection = Direction == "asc" ? "desc" : "asc";

        await OnSort.InvokeAsync((Column, newDirection));
    }
}
