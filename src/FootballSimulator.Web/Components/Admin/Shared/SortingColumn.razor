<th class="sortable @SortCss"
    @onclick="OnClick">
    <div class="sort-wrapper">
        <span class="sort-indicator">
            @if (IsCurrentSort)
            {
                <span class="arrow up @(Direction == "asc" ? "active" : "")">▲</span>
                <span class="arrow down @(Direction == "desc" ? "active" : "")">▼</span>
            }
            else
            {
                <span class="arrow up disabled">▲</span>
                <span class="arrow down disabled">▼</span>
            }
        </span>
        <span class="header-text">@Text</span>
    </div>
</th>

@code {
    [Parameter] public string Text { get; set; } = "";
    [Parameter] public string Column { get; set; } = "";
    [Parameter] public string SortBy { get; set; } = "";
    [Parameter] public string Direction { get; set; } = "asc";
    [Parameter] public EventCallback<(string SortBy, string Direction)> OnSort { get; set; }

    private bool IsCurrentSort => SortBy == Column;

    private string SortCss => IsCurrentSort ? (Direction == "asc" ? "ascending" : "descending") : "";

    private string SortSymbol => !IsCurrentSort ? "" : Direction == "asc" ? "▲" : "▼";

    private async Task OnClick()
    {
        string newDirection = Direction;

        if (IsCurrentSort)
            newDirection = Direction == "asc" ? "desc" : "asc";

        await OnSort.InvokeAsync((Column, newDirection));
    }
}
